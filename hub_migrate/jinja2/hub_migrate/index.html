<!DOCTYPE html>
<html>
<head lang="zh-CN">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>HUB data migration</title>
    <link rel="stylesheet" href="{{ static('hub_migrate/css/reset.css') }}">
    <link rel="stylesheet" href="{{ static('hub_migrate/css/index.css') }}">
    <script type="text/javascript" src="{{ static('hub_migrate/js/jquery.js') }}"></script>
</head>
<body>
    <h1 class="title">Hub migration</h1>
    <div class="container">
        <div class="left">
            <h2 class="title1">Job management</h2>
        </div>
        <div class="right">
            <input type="text" placeholder="请输入查询条件">
            <button>New</button>
        </div>
        <div class="creatTable">
            <table cellpadding="0" cellspacing="0" border="1" >
                <thead>
                <tr>
                    <td></td>
                    <td>ID</td>
                    <td>Name</td>
                    <td>StartTime</td>
                    <td>RunTime</td>
                    <td>status</td>
                    <td>operation</td>
                </tr>
                </thead>
                <tbody id="addTable">

                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
<script type="text/javascript">
    $(function(){
            $.ajax({
                url : "http://192.168.1.112/hub_migrate/index.html/get_job/",
                dataType : "json",
                async : true,
                type : "post",
                contentType : "application/json;charset=UTF-8",
                success : function(data){
                    console.log(data);
                    var addTable = $("#addTable");
                    var json =JSON.parse(data.page)
                    for(var i=0;i < json.length;i++){
                        addTable.append($("<tr>"));
                        var d = json[i];
                        $("#addTable").append('<td><input type="radio" name="radio"></td>');
                        $("#addTable").append('<td>'+d.pk+'</td>');
                        $("#addTable").append('<td>'+d.fields.name+'</td>');
                        $("#addTable").append('<td>'+d.fields.start_time+'</td>');
                        $("#addTable").append('<td>'+d.fields.finished_time+'</td>');
                        $("#addTable").append('<td>'+d.fields.status+'</td>');
                        $("#addTable").append('<td>操作</td>');
                        $("#addTable").append("</tr>");

                    }
                },
                error : function(err){
                   console.log(err);
                }
            })
    })
</script>